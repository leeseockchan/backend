<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/single.css">
</head>

<body>
    <header><h1>setInterval 메소드 활용</h1></header>
    <div id="img_silde">
        <ul id="banner">
            <li>
                <a href="#">
                    <img src="img/slide1.jpg" alt="">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="img/slide2.jpg" alt="">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="img/slide3.jpg" alt="">
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="img/slide1.jpg" alt="">
                </a>
            </li>
        </ul>
        <div class="btn">
            <a href="#" class="prev">
                <img src="img/prev_btn.png" alt="이전 버튼">
            </a>
            <a href="#" class="next">
                <img src="img/next_btn.png" alt="다음 버튼">
            </a>
        </div>
    </div>

    <script>
        var list = document.getElementById('banner');
        var listLi = document.querySelectorAll('#banner li');
        var show_num = 1;  // 화면에 보여지는 사진 1장을 뜻한다.
        var total = 3;
        var li_width = document.querySelector('#banner li').offsetWidth;
        var prev = document.querySelector('.prev');
        var next = document.querySelector('.next');

        //alert(li_width);
        //var li_width= 1200;
        
        for (var i = 0; i < 3; i++) {
            var copyuobj = listLi[i].cloneNode(true);
            // #banner li - 0번째 인덱스 번호에 해당하는
            // li 선택 후 복사 후 copyobj 저장
            list.append(copyuobj);
            // #banner 맨 뒤에 copyobj를 추가하여라
        }

        

        var num = 0;
        next.addEventListener('click', function () {
            if (num == 3) {
                num = 0;
                list.style.transition = "none";
                list.style.marginLeft = "0px";
            }
            setTimeout(function () {
        // 한번만 실행 -> 50=0.05초를 뜻한다
        // setTimeout num=0 -> 1으로 가는 동안 동시 실행을 방지
            num++;
            list.style.transition = "margin-left 0.5s";
            list.style.marginLeft = -li_width * num + "px";
            }, 50);
        }); 

        prev.addEventListener('click', function () {
            if (num == 0) {
                num = 3;
                list.style.transition = "none";
                list.style.marginLeft = -li_width * num + "px";
            }
            setTimeout(function () {
            num--;
            list.style.transition = "margin-left 0.5s";
            list.style.marginLeft = -li_width * num + "px";
            });
        }); 


        function autoplay(){
            if (num === 3) {
                num = 0;
                list.style.transition = "none";
                list.style.marginLeft = "0px";
            }
            setTimeout(function () {
            num++;
            list.style.transition = "margin-left 0.5s";
            list.style.marginLeft = -li_width * num + "px";
            }, 50);
        }
        setInterval(autoplay, 3000);
        //autoplay 라는 함수를 3초마다 실행해라 
        
    </script>
</body>

</html>